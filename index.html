<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>箱入り娘の大家族</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>箱入り娘の大家族</h1>
            <p>スライディングパズルゲーム - 娘（赤い駒）を下の出口から脱出させよう！</p>
        </header>
        
        <main>
            <div class="game-area">
                <canvas id="gameCanvas" width="480" height="400"></canvas>
                
                <div class="controls">
                    <button id="resetBtn">リセット</button>
                    <button id="solveBtn">最短手探索</button>
                    <button id="cancelBtn" style="display: none;">キャンセル</button>
                    <button id="helpBtn">ヘルプ</button>
                </div>
                
                <div class="info-panel">
                    <div class="move-counter">
                        <span>手数: </span>
                        <span id="moveCount">0</span>
                    </div>
                    
                    <div class="status">
                        <span id="statusMessage">駒をクリックまたはドラッグして移動</span>
                    </div>
                    
                    <div id="solverProgress" class="solver-progress" style="display: none;">
                        <div class="progress-bar">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>
                        <div class="progress-text">
                            <span id="progressMessage">探索中...</span>
                        </div>
                        <div class="progress-stats">
                            <div>探索状態: <span id="exploredStates">0</span></div>
                            <div>現在深度: <span id="currentDepth">0</span></div>
                            <div>キュー: <span id="queueSize">0</span></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <aside class="instructions">
                <h3>遊び方</h3>
                <ul>
                    <li><strong>目標:</strong> 娘（赤い2×2の駒）を下の出口から脱出させる</li>
                    <li><strong>ワンクリック移動:</strong> 移動先が1つしかない駒はクリックで自動移動</li>
                    <li><strong>ドラッグ移動:</strong> 複数の移動先がある駒はドラッグして移動</li>
                    <li><strong>青いオーバーレイ:</strong> 移動可能な位置を表示</li>
                    <li><strong>黄色ハイライト:</strong> ドラッグ中の有効な移動先</li>
                </ul>
                
                <h3>駒の種類</h3>
                <div class="piece-legend">
                    <div class="legend-item"><span class="color-box daughter"></span>娘 (2×2)</div>
                    <div class="legend-item"><span class="color-box father"></span>父 (1×2)</div>
                    <div class="legend-item"><span class="color-box mother"></span>母 (1×2)</div>
                    <div class="legend-item"><span class="color-box head-clerk"></span>大番頭 (4×1)</div>
                    <div class="legend-item"><span class="color-box assistant"></span>手代 (1×1)</div>
                    <div class="legend-item"><span class="color-box maid"></span>女中 (2×1)</div>
                    <div class="legend-item"><span class="color-box clerk"></span>番頭 (2×1)</div>
                    <div class="legend-item"><span class="color-box grandfather"></span>祖父 (2×1)</div>
                    <div class="legend-item"><span class="color-box grandmother"></span>祖母 (2×1)</div>
                    <div class="legend-item"><span class="color-box dog"></span>番犬 (1×1)</div>
                    <div class="legend-item"><span class="color-box sister-in-law"></span>兄嫁 (1×1)</div>
                    <div class="legend-item"><span class="color-box apprentice"></span>丁稚 (1×1) ×3</div>
                </div>
            </aside>
        </main>
        
        <footer>
            <p>© 2024 箱入り娘の大家族 - 伝統的な日本のパズルゲーム</p>
        </footer>
    </div>
    
    <!-- ヘルプモーダル -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>箱入り娘の大家族 - ヘルプ</h2>
            <h3>ゲームの目標</h3>
            <p>赤い娘の駒（2×2）を盤面下部の出口から脱出させることが目標です。</p>
            
            <h3>操作方法</h3>
            <ul>
                <li><strong>ワンクリック移動:</strong> 移動先が1つしかない駒をクリックすると自動で移動します</li>
                <li><strong>ドラッグ&ドロップ:</strong> 複数の移動先がある駒はドラッグして移動先を選択できます</li>
                <li><strong>移動可能位置の表示:</strong> 駒を選択すると青い半透明のオーバーレイで移動可能位置が表示されます</li>
                <li><strong>ドラッグ中のハイライト:</strong> ドラッグ中に有効な移動先にマウスを合わせると黄色でハイライトされます</li>
            </ul>
            
            <h3>移動ルール</h3>
            <ul>
                <li>駒は上下左右の直線方向のみ移動可能（斜め移動は不可）</li>
                <li>移動経路に他の駒がある場合は移動できません</li>
                <li>盤面の境界を超えることはできません</li>
            </ul>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>