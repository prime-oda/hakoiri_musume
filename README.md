# 箱入り娘の大家族

「箱入り娘の大家族」のPythonゲームアプリケーションです。通常の箱入り娘パズルの拡張版で、より多くの駒と複雑なパズルを楽しめます。

## 🎮 オンラインでプレイ

**[▶️ GitHub Pagesでプレイする](https://USERNAME.github.io/hakoiri_musume/)**

ブラウザで直接プレイできます！インストール不要です。

## ゲーム概要

### 基本ルール
- スライディングパズルゲーム
- 駒を上下左右にスライドさせて移動
- 目標：娘（2×2の赤い駒）を盤面下部の出口から脱出させる
- 難易度：数百手から数千手を要する高難度パズル

### 盤面
- サイズ：6×5マス
- グリッド表示で駒の配置が明確

## 駒の構成（合計15コマ）

| 駒名 | サイズ | 色 | 個数 | 説明 |
|------|--------|----|----- |------|
| 娘 | 2×2 | 赤色 | 1個 | 脱出させる目標の駒 |
| 父 | 1×2 | 紫色 | 1個 | 縦長の駒 |
| 母 | 1×2 | ピンク色 | 1個 | 縦長の駒 |
| 大番頭 | 4×1 | 青色 | 1個 | 横長の大きな駒 |
| 手代 | 1×1 | オレンジ色 | 1個 | 小さな駒 |
| 女中 | 2×1 | 緑色 | 1個 | 横長の駒 |
| 番頭 | 2×1 | 黄色 | 1個 | 横長の駒 |
| 祖父 | 2×1 | 茶色 | 1個 | 横長の駒 |
| 祖母 | 2×1 | 紫ピンク色 | 1個 | 横長の駒 |
| 番犬 | 1×1 | グレー色 | 1個 | 小さな駒 |
| 兄嫁 | 1×1 | 薄緑色 | 1個 | 小さな駒 |
| 丁稚 | 1×1 | 薄黄色 | 3個 | 小さな駒（丁1、丁2、丁3で区別） |

### 初期配置
```
空父娘娘母空
空父娘娘母空  
手大大大大嫁
丁番頭女中丁
犬祖父祖母丁
```

## 操作方法

### 基本操作
1. **ワンクリック移動**
   - 移動先が1つしかない駒をクリック → 自動で移動
   
2. **ドラッグ&ドロップ移動**
   - 複数の移動先がある駒をドラッグして移動
   - 移動可能位置が青色のオーバーレイで表示
   - ドラッグ中は有効な移動先が黄色でハイライト
   - ハイライトされた位置にドロップで移動完了

### 視覚的支援機能
- **移動可能マスの表示**: 駒をクリックすると移動可能な位置が半透明の青色で表示
- **ドラッグ中のハイライト**: 有効な移動先にマウスを合わせると黄色でハイライト
- **駒の選択表示**: 選択された駒は赤い枠線で表示
- **日本語フォント対応**: 駒の名前が日本語で表示

### 移動ルール
- 上下左右の直線移動のみ（斜め移動は不可）
- 移動経路に他の駒がある場合は移動不可
- 盤面の境界を超える移動は不可
- スライドパズルの基本ルールに準拠

## 技術仕様

### Python版（デスクトップアプリ）
- **言語**: Python 3.x
- **GUIライブラリ**: pygame
- **プラットフォーム**: macOS（他のOSでも動作可能）

#### セットアップ
```bash
# 仮想環境の作成
python3 -m venv venv

# 仮想環境の有効化
source venv/bin/activate

# 依存関係のインストール
pip install pygame

# アプリケーションの実行
python main.py

# 仮想環境の無効化（終了時）
deactivate
```

### Web版（ブラウザアプリ）
- **言語**: HTML5 + CSS3 + JavaScript (ES6+)
- **描画**: HTML5 Canvas API
- **プラットフォーム**: モダンブラウザ（Chrome、Firefox、Safari、Edge等）

#### セットアップ
```bash
# webディレクトリ内のindex.htmlをブラウザで開く
# または、ローカルサーバーを起動（推奨）

# Python簡易サーバーの場合
cd web
python3 -m http.server 8000

# Node.js簡易サーバーの場合
npx http-server web -p 8000

# ブラウザでアクセス
# http://localhost:8000
```

## ファイル構成

### Python版
- `main.py` - メインゲームループとUI処理
- `board.py` - 盤面の描画と座標管理
- `piece.py` - 駒のクラス定義と移動ロジック

### Web版
- `web/index.html` - HTMLマークアップとUI構造
- `web/style.css` - スタイリングとレスポンシブデザイン
- `web/game.js` - ゲームロジックとCanvas描画

### 共通
- `CLAUDE.md` - Claude Code用の開発ガイド
- `README.md` - このファイル
- `.gitignore` - Git除外設定

## ゲームの特徴

### 操作性の向上
- 直感的なマウス操作
- 視覚的フィードバックによる操作支援
- ワンクリック移動による効率化
- 無効な移動の事前防止

### パズルの複雑さ
- 通常の箱入り娘（5×4マス、11駒）より大規模
- 15個の様々なサイズの駒
- 数百手以上を要する高難度設計

### ユーザビリティ
- 色分けされた駒で判別容易
- 日本語での駒名表示
- リアルタイムな移動可能位置の表示
- 操作ミスの防止機能

## 完成済み機能

### 基本機能
- ✅ 手数カウント機能
- ✅ ワンクリック自動移動
- ✅ ドラッグ&ドロップ操作
- ✅ 移動可能位置の視覚表示
- ✅ ゲームリセット機能
- ✅ ヘルプ機能
- ✅ レスポンシブデザイン（Web版）

## 今後の拡張予定
- 最短手順の記録・表示
- パズルの保存・読み込み機能
- 複数の初期配置パターン
- ヒント機能
- スムーズなアニメーション効果
- 音響効果
- タイマー機能
- 解法の自動再生機能

---

**箱入り娘の大家族**は、伝統的な日本のパズルゲームの魅力を現代的なインターフェースで楽しめるアプリケーションです。